{% extends 'baseFront.html.twig' %}

{% block section %}
    <div class="container">
        <h1 class="my-4">Terrains par Sport</h1>
        <div class="row">
            {% for terrain in terrains %}
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">{{ terrain.nomterrain }}</h5>
                            <p class="card-text">Localisation: <a href="https://www.google.com/maps/search/?api=1&query={{ terrain.localisation }}">{{ terrain.localisation }}</a></p>
                            
                            <p class="card-text">Taille: {{ terrain.taille }}</p>
                        </div>
                    </div>
                </div>
                <div id="map" style="height: 400px;"></div>
<script>
    function initMap() {
        var terrainLocation = "{{ terrain.localisation }}";
        var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 0, lng: 0}, // Centre de la carte par défaut
            zoom: 15 // Niveau de zoom par défaut
        });
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({'address': terrainLocation}, function(results, status) {
            if (status === 'OK') {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
            } else {
                alert('La géolocalisation a échoué : ' + status);
            }
        });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=VOTRE_CLE_API&callback=initMap" async defer></script>
            {% else %}
                <div class="col">
                    <p>Aucun enregistrement trouvé</p>
                </div>
            {% endfor %}
        </div>
    </div>
    

{% endblock %}
